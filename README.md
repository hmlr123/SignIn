# 功能模块

## 首页
### 我听的课 
1. 卡片 简要课程信息：名称 人数 简介缩略（三个点弹出菜单 置顶，请假， 签到，退出班级）
2. 点击课程详情。 

### 我教的课  
1. 卡片 简要课程信息 
2. 成员管理（邀请学生，删除学生）  
3. 设置（课程名称，简介，时间，地点等）发起公告  
4. 签到详情 （签到 缺勤） 
5. 底部菜单功能：发起签到、解散班级

### + 号  
1. 创建课程（进入课程信息输入界面）
2. 加入班级 

## 消息 
发布的消息（加入班级通知，退出班级通知，创建班级通知，签到通知，公告通知等） 标题 内容  时间 

## 我的 
1. 个人资料（展示 编辑） 
2. 签到记录（学生）
3. 教师发起签到记录（课程名称 时间 地点） 
4. 关于我们	



# 功能开发清单 进度
## 首页
### 我听的课
1. 显示我的课程 我教得课程
2. 学生添加课程 退出课程
3. 输入签到码 和 加入课程 modal合并 OK
4. 签到签离

### 我教得课程
1. 解散班级
2. 发起签到 结束签到
3. 创建课程

## 消息

## 我的
1. 修改个人信息
2. 显示签到记录 显示发起签到记录


# 页面清单
1. index 登录
2. register 注册
3. course_index 首页
4. 






通知种类：
1. 操作点对点通知
2. 群发通知


需求： 如何通知：WebSocket实现  教师点击发起签到，返回签到码 通知教师该通知，通知学生签到码
Q: 服务端如何向客户端主动推送数据
A：使用websocket
Q：如何知道服务端知道客户端已经接收到了通知
A：UUID标识消息ID，flag标识是否已读 userId标识用户的消息，用户不在线，数据在服务端保存
Q：如何处理单个消息通知和群发消息通知 服务端存储方式 
A：消息存储在服务器 接收者字段，逗号分开，
Q：如何处理群发消息部分用户接收到 部分用户没有接收到情况
A：数据格式修改 接收者为json数据[{userId:xxx, flag:是否已读},,,,]
Q：接收者JOSN格式 如何查询用户，每次查询全部数据，解析JSON，遍历ID？
A：上述模型不成立，单独一张表，保存用户消息
userId UUID flag
用户ID 消息ID 已读标志位

流程分析：
用户登录：请求消息->服务器查询数据->根据用户ID和是否已读标识，读取数据返回给用户->客户已读->发送请求->修改消息标志位
用户发起签到：请求消息->服务器生成数据->存储数据库->调用websocket消息通知->读取数据->发送客户（学生、教师）->客户已读->发送已读通知->修改标志位

用户发起签到，生成通知，存储通知，用户点击消息，请求消息，服务器查询,客户端已读，返回已读，修改服务器标志位

客户端逻辑：用户点击消息：查询本地消息，查询服务器消息，时间排序，显示通知（标志已读/未读），用户点击消息未读消息，修改本地消息标志位，将消息存储在本地，请求服务器修改标志位


消息通知表设计
id 逐渐自增
uuid  消息唯一标识
title 标题
content 内容
user_id 发布者ID
user_name 发布者姓名
publish_time 发布时间
accept_group 接收者 json数组  字段不需要 用户-消息 单独的表维护
attachments   附件
